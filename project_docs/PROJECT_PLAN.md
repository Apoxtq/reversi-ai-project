# Reversi AI 项目计划与进度

**学生：** 田祺星 (Tianqixing) - 201821852  
**学年：** 2025-26  
**项目周期：** 12周 (2025年10月8日 - 12月31日)  
**最后更新：** 2025年10月12日

---

## 📊 项目总览

| Phase | 状态 | 进度 | 时间 |
|-------|------|------|------|
| **Phase 0: 环境设置** | ✅ 完成 | 100% | Week 0 |
| **Phase 1: 核心开发 (Week 1-6)** | 🔄 进行中 | 20% | ~110h |
| **Phase 2: UI与网络 (Week 7-8)** | ⏳ 待开始 | 0% | ~75h |
| **Phase 3: 研究优化 (Week 9-11)** | ⏳ 待开始 | 0% | ~70h |
| **Phase 4: 完成交付 (Week 12)** | ⏳ 待开始 | 0% | ~30h |

**整体进度：** 20% | **已用时间：** 25小时 | **预估总时间：** 285小时

---

## ✅ Phase 0: 环境设置 (已完成)

### 开发环境 ✅
- [x] GCC 13.2.0 (C++20支持)
- [x] CMake 4.1.2
- [x] Git 2.47.0
- [x] Scoop 包管理器
- [x] 项目结构搭建

### 核心文件 ✅
- [x] Board.hpp/cpp - 棋盘类
- [x] Move.hpp/cpp - 移动类
- [x] AIStrategy.hpp - AI接口
- [x] Benchmark.hpp/cpp - 性能测试
- [x] Build scripts (quick_compile.bat, build.bat, clean.bat)

### 文档系统 ✅
- [x] README.md
- [x] 项目结构文档
- [x] .gitignore配置

---

## 🔄 Phase 1: 核心开发 (Week 1-6) - 进行中

### Week 1: Bitboard基础 (10/8-10/14) - ✅ 100%完成

#### 已完成 ✅
- [x] Bitboard结构实现
- [x] 初始位置设置
- [x] 棋子计数 (std::popcount)
- [x] 棋盘显示
- [x] 基础Move类
- [x] 项目成功编译运行
- [x] **合法移动生成算法** ✨
  - [x] 8个方向的扫描
  - [x] 边界处理 (防止wraparound)
  - [x] 空位检测与验证
- [x] **翻转棋子计算** ✨
  - [x] calc_flip() 函数实现
  - [x] 方向扫描累积候选翻转
- [x] **移动执行** ✨
  - [x] make_move() 函数实现
  - [x] 自动交换player/opponent
- [x] **终局检测** ✨
  - [x] is_terminal() 函数实现
  - [x] 检测双方都无合法移动
- [x] **测试套件** ✨
  - [x] simple_test.cpp 创建
  - [x] 验证初始位置4个合法移动
  - [x] 验证移动执行和翻转
  - [x] 所有测试通过

**完成日期：** 2025年10月11日  
**实际时间：** ~22小时  
**参考资料：**
- Egaroucid项目 (flip_generic.hpp)
- Rust Reversi项目 (rules.rs)
- 自主实现的方向扫描算法

**测试结果：**
```
✅ 初始位置: 4个合法移动 (d6, c5, f4, e3)
✅ 移动执行: 正确翻转1个棋子
✅ 棋盘更新: player/opponent正确交换
✅ 合法移动重新计算: 对手3个合法移动
✅ 终局检测: 正确识别满盘状态
✅ 测试套件: 5个测试全部通过
```

**性能指标：**
```
✅ 合法移动生成: ~11M ops/sec (目标: >10M)
✅ 移动执行: ~11M ops/sec (目标: >5M)
✅ 哈希计算: ~544M ops/sec (目标: >20M)
✅ 游戏模拟: ~124K games/sec (目标: >5K)
```

**交付成果：**
- ✅ 3个测试程序（simple_test, test_legal_moves, benchmark）
- ✅ 完整的性能基准测试
- ✅ 代码零警告编译通过
- ✅ 详细的学习笔记（Bitboard Day1）
- ✅ 完整的游戏规则文档（1694行）

---

### Week 2: 移动执行与优化 (10/15-10/21) - 准备开始 🎯

- [ ] 撤销移动功能 (undo_move)
- [ ] 移动执行优化
- [ ] Zobrist哈希基础
- [ ] 性能优化与测试
- [ ] 代码重构与文档

**时间：** ~18-20小时  
**注：** Week 1已提前完成移动执行、翻转、终局检测

---

### Week 3: Minimax引擎 + 测试 (10/22-10/28) ⏳

- [ ] 安装Google Test
- [ ] Minimax算法实现
- [ ] Alpha-Beta剪枝
- [ ] 简单评估函数
- [ ] 核心功能单元测试

**时间：** ~20-25小时

---

### Week 4: 评估函数 (10/29-11/4) ⏳

- [ ] 位置权重评估
- [ ] 行动力评估
- [ ] 稳定性分析
- [ ] 边角策略
- [ ] 评估函数调优

**时间：** ~20-25小时

---

### Week 5: 高级搜索 (11/5-11/11) ⏳

- [ ] 迭代加深搜索
- [ ] Move Ordering
- [ ] Principal Variation Search
- [ ] 搜索窗口优化

**时间：** ~25-30小时

---

### Week 6: 置换表 (11/12-11/18) ⏳

- [ ] Zobrist哈希完整实现
- [ ] 置换表数据结构
- [ ] 表项替换策略
- [ ] 碰撞处理
- [ ] 性能测试

**里程碑：基础AI引擎完成** 🎯

**时间：** ~20-25小时

---

## ⏳ Phase 2: UI与网络 (Week 7-8)

### Week 7: SFML UI (11/19-11/25)

- [ ] 学习SFML基础
- [ ] 棋盘渲染
- [ ] 棋子绘制
- [ ] 鼠标交互
- [ ] 移动动画
- [ ] 菜单系统

**时间：** ~25-30小时

---

### Week 8: 网络对战 (11/26-12/2)

- [ ] SFML Network模块
- [ ] TCP Socket通信
- [ ] 客户端/服务器架构
- [ ] 移动同步协议
- [ ] 断线重连
- [ ] 局域网测试

**里程碑：完整游戏可玩** 🎯

**时间：** ~20-25小时

---

## ⏳ Phase 3: 研究与优化 (Week 9-11)

### Week 9: MCTS实现 (12/3-12/9)

- [ ] MCTS基础算法
- [ ] UCB1选择策略
- [ ] 树策略
- [ ] 默认策略
- [ ] MCTS vs Minimax对比

**时间：** ~30-35小时

---

### Week 10: Benchmark系统 (12/10-12/16)

- [ ] AI vs AI对战框架
- [ ] 统计分析
- [ ] Minimax vs MCTS对比
- [ ] 不同难度级别测试
- [ ] (可选) GTP协议对战Egaroucid

**时间：** ~20-25小时

---

### Week 11: CA2文档 (12/17-12/23)

- [ ] 项目架构设计文档
- [ ] 核心算法实现说明
- [ ] 性能测试报告
- [ ] 用户手册
- [ ] UML类图和序列图
- [ ] 代码注释完善 (Doxygen)

**里程碑：研究数据与文档完成** 🎯

**时间：** ~25-30小时

---

## ⏳ Phase 4: 完成交付 (Week 12)

### Week 12: 最终测试与提交 (12/24-12/31)

- [ ] 完整功能回归测试
- [ ] 用户验收测试
- [ ] Bug修复
- [ ] 代码格式化 (clang-format)
- [ ] 最终报告撰写
- [ ] 演示准备

**里程碑：项目交付** 🎯

**时间：** ~20-25小时

---

## 🎯 关键里程碑

| # | 里程碑 | 时间 | 状态 |
|---|--------|------|------|
| 0 | 项目初始化 | Week 0 | ✅ |
| 1 | Bitboard实现 | Week 1-2 | 🔄 |
| 2 | 基础AI引擎 | Week 3-4 | ⏳ |
| 3 | 优化特性 | Week 5-6 | ⏳ |
| 4 | UI与网络 | Week 7-8 | ⏳ |
| 5 | 研究分析 | Week 9-11 | ⏳ |
| 6 | 项目完成 | Week 12 | ⏳ |

---

## 📝 代码统计

### 当前状态 (Week 1)
```
src/core/Board.cpp          : ~140 lines
src/core/Board.hpp          : ~70 lines
src/core/Move.cpp           : ~60 lines
src/core/Move.hpp           : ~55 lines
src/ai/AIStrategy.hpp       : ~115 lines
src/research/benchmark/     : ~90 lines
src/main.cpp                : ~160 lines
----------------------------------------
总计                         : ~690 lines
```

### 预期最终规模
- **核心代码：** ~5,000 lines
- **AI引擎：** ~2,000 lines
- **UI代码：** ~1,500 lines
- **测试代码：** ~1,000 lines
- **总计：** ~10,000 lines

---

## 📚 学习进度

### 已掌握 ✅
- [x] Bitboard表示
- [x] C++20位操作函数
- [x] 基础棋盘状态管理
- [x] CMake项目结构
- [x] 现代C++项目组织
- [x] **Bitboard移动生成算法** ✨
- [x] **方向位移操作** ✨
- [x] **边界处理与掩码** ✨
- [x] **翻转棋子计算** ✨
- [x] **终局检测** ✨

### 学习中 🔄
- [ ] 撤销移动机制 (Week 2)
- [ ] Zobrist哈希 (Week 2)

### 待学习 📅
- [ ] Minimax算法 (Week 3)
- [ ] Alpha-Beta剪枝 (Week 3)
- [ ] 评估函数设计 (Week 4)
- [ ] MCTS算法 (Week 9)
- [ ] 性能分析与优化 (Week 10-11)

---

## 🐛 已知问题

### 当前问题
- 无 - Week 1核心功能已全部完成并通过测试

### 技术债务
1. **待实现功能**
   - 撤销移动 (undo_move) - Week 2
   - Zobrist哈希 - Week 2
   - 评估函数 - Week 4
   - AI搜索引擎 - Week 3-6

2. **优化空间**
   - 合法移动生成可进一步优化（预计算表）
   - 翻转计算可使用SIMD指令
   - 内存管理可优化（对象池）

### 构建系统备注
- CMake有PowerShell输出问题
- 解决方案: 使用 `quick_compile.bat` 进行测试
- 直接g++编译正常工作

---

## ⏰ 时间追踪

### 已用时间
- Week 0 (设置): 7小时 ✅
- Week 1 (Bitboard): 22小时 ✅
- **总计: 29小时**

### 时间预算
| Phase | 预估时间 | 平均/周 |
|-------|---------|---------|
| Phase 1 (Week 1-6) | 110小时 | ~18h/周 |
| Phase 2 (Week 7-8) | 75小时 | ~37h/周 |
| Phase 3 (Week 9-11) | 70小时 | ~23h/周 |
| Phase 4 (Week 12) | 30小时 | ~30h/周 |
| **总计** | **285小时** | **~24h/周** |

**缓冲时间：** 30小时 (10%)

---

## 🎓 可交付成果

### 代码交付
- [x] ✅ 源代码仓库 (Git)
- [ ] 完整的构建系统
- [ ] 单元测试套件
- [ ] 性能基准测试
- [ ] 代码文档 (注释)

### 文档交付
- [x] ✅ README和入门指南
- [x] ✅ 项目结构文档
- [x] ✅ 学习笔记 (Week 1)
- [ ] 算法文档
- [ ] API文档
- [ ] 用户手册
- [ ] 性能分析报告
- [ ] 最终研究报告

### 功能交付
- [x] ✅ Bitboard棋盘表示
- [ ] 完整的游戏逻辑
- [ ] Minimax AI引擎
- [ ] MCTS AI引擎
- [ ] 图形用户界面
- [ ] 网络对战功能
- [ ] 性能基准框架

---

## 🚀 下一步行动 (本周)

### 立即任务 (Week 2) 🎯
1. **撤销移动功能**
   - 实现 undo_move() 函数
   - 保存移动历史
   - 测试撤销正确性

2. **Zobrist哈希**
   - 学习Zobrist哈希原理
   - 实现哈希计算
   - 集成到Board类

3. **性能优化**
   - 优化合法移动生成
   - 优化翻转计算
   - 性能基准测试

### 下周准备 (Week 3)
1. 安装Google Test框架
2. 开始Minimax算法研究
3. 设计评估函数接口

---

## 💡 经验教训

### Week 0-1见解
1. **构建系统：**
   - CMake功能强大但有平台特定问题
   - 备用构建方法 (batch脚本) 很有价值

2. **C++标准：**
   - C++20特性显著改进bitboard代码
   - 需确保编译器支持 (GCC 13.2+良好)

3. **项目组织：**
   - 清晰的目录结构有助于开发
   - 关注点分离 (core/ai/ui) 很重要

4. **文档：**
   - 边做边记录，不要事后补
   - 学习笔记帮助巩固理解

---

## 📌 重要日期

| 日期 | 事件 | 优先级 |
|------|------|--------|
| **2025-10-29** | CA1提案截止 | 🔴 高 |
| **2025-11-04** | Week 4验收 (Minimax完成) | 🟡 中 |
| **2025-12-02** | Week 8验收 (网络对战完成) | 🟡 中 |
| **2025-12-31** | 最终提交 | 🔴 高 |

---

## 📊 成功指标

### 技术指标
- [x] 项目无错误编译 ✓
- [x] 遵循C++20最佳实践 ✓
- [ ] 单元测试覆盖率 > 80% (Week 3+)
- [ ] AI可进行合法游戏 (Week 4+)
- [ ] 基准框架运行 (Week 10+)

### 学习成果
- [x] 理解bitboard表示 ✓
- [x] C++20特性熟练度 ✓
- [ ] AI搜索算法 (Week 3-9)
- [ ] 性能优化 (Week 10-11)
- [ ] 研究方法 (Week 9-12)

---

## 🔗 相关资源

### 项目文档
- [README.md](../README.md) - 项目概览
- [TECHNICAL_ISSUES_SOLUTIONS.md](TECHNICAL_ISSUES_SOLUTIONS.md) - 技术问题手册
- [github/GETTING_STARTED.md](github/GETTING_STARTED.md) - 入门指南
- [github/BUILD_AND_RUN.md](github/BUILD_AND_RUN.md) - 构建说明

### 学习笔记
- [docs/week1_bitboard_notes.md](../docs/week1_bitboard_notes.md) - Week 1笔记

### 参考资料
- Egaroucid - Bitboard实现参考
- AlphaZero_Gomoku - MCTS参考
- Chess Programming Wiki - Bitboards理论

---

**当前焦点：** Week 2 - 撤销移动与Zobrist哈希  
**下一里程碑：** Minimax引擎实现 (Week 3-4)  
**整体状态：** ✅ 超前进度（Week 1提前完成）

---

*本文档每周更新以跟踪项目进度*

