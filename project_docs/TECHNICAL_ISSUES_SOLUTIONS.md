# æŠ€æœ¯é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆæ±‡æ€»

**é¡¹ç›®ï¼š** Reversi AI - COMP390 Honours Project  
**ç»´æŠ¤è€…ï¼š** Tianqixing (201821852)  
**æœ€åæ›´æ–°ï¼š** 2025å¹´10æœˆ12æ—¥

---

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

**æ€§è´¨ï¼š** æŠ€æœ¯å‚è€ƒæ–‡æ¡£ / é—®é¢˜è§£å†³æ‰‹å†Œ  
**ä¼˜å…ˆçº§ï¼š** â­â­â­â­â­ (é«˜ä¼˜å…ˆçº§ - å¼€å‘å¿…è¯»)  
**ç”¨é€”ï¼š** è®°å½•é¡¹ç›®ä¸­é‡åˆ°çš„æ‰€æœ‰æŠ€æœ¯é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ  
**å—ä¼—ï¼š** å¼€å‘è€…ã€è°ƒè¯•äººå‘˜ã€æœªæ¥çš„è‡ªå·±

---

## ğŸ“‘ ç›®å½•

1. [C++ç¼–è¯‘ç›¸å…³é—®é¢˜](#1-cç¼–è¯‘ç›¸å…³é—®é¢˜)
2. [æ„å»ºç³»ç»Ÿé—®é¢˜](#2-æ„å»ºç³»ç»Ÿé—®é¢˜)
3. [åº“ä¾èµ–é—®é¢˜](#3-åº“ä¾èµ–é—®é¢˜)
4. [å‚è€ƒé¡¹ç›®é›†æˆé—®é¢˜](#4-å‚è€ƒé¡¹ç›®é›†æˆé—®é¢˜)
5. [æ€§èƒ½ä¸ä¼˜åŒ–é—®é¢˜](#5-æ€§èƒ½ä¸ä¼˜åŒ–é—®é¢˜)
6. [å¹³å°å…¼å®¹æ€§é—®é¢˜](#6-å¹³å°å…¼å®¹æ€§é—®é¢˜)
7. [è°ƒè¯•æŠ€å·§](#7-è°ƒè¯•æŠ€å·§)
8. [é¢„é˜²æªæ–½](#8-é¢„é˜²æªæ–½)

---

## 1. C++ç¼–è¯‘ç›¸å…³é—®é¢˜

### ğŸ”´ é—®é¢˜1.1: std::popcountæœªæ‰¾åˆ°

**ä¸¥é‡ç¨‹åº¦ï¼š** é«˜  
**å‘ç”Ÿæ—¶é—´ï¼š** Week 1, Day 1  
**é”™è¯¯ä¿¡æ¯ï¼š**
```
error: 'popcount' is not a member of 'std'
```

**æ ¹æœ¬åŸå› ï¼š**
- `std::popcount` æ˜¯C++20æ–°å¢çš„åŠŸèƒ½
- é¡¹ç›®æœ€åˆé…ç½®ä¸ºC++17æ ‡å‡†
- GCCç¼–è¯‘å™¨éœ€è¦æ˜¾å¼å¯ç”¨C++20

**è§£å†³æ–¹æ¡ˆï¼š**

1. **CMakeLists.txtä¿®æ”¹ï¼š**
```cmake
# é”™è¯¯é…ç½®
set(CMAKE_CXX_STANDARD 17)

# æ­£ç¡®é…ç½®
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
```

2. **ç›´æ¥ç¼–è¯‘å‘½ä»¤ï¼š**
```bash
# é”™è¯¯
g++ -std=c++17 ...

# æ­£ç¡®
g++ -std=c++20 ...
```

**éªŒè¯æ–¹æ³•ï¼š**
```bash
# æ£€æŸ¥ç¼–è¯‘å™¨æ”¯æŒ
g++ --version  # éœ€è¦ >= 10.0

# æµ‹è¯•ç¼–è¯‘
echo '#include <bit>
int main() { return std::popcount(42); }' > test.cpp
g++ -std=c++20 test.cpp -o test
```

**ç›¸å…³ä»£ç ä½ç½®ï¼š**
- `src/core/Board.cpp` (ä½¿ç”¨ std::popcount)
- `CMakeLists.txt` (æ ‡å‡†è®¾ç½®)

**é¢„é˜²æªæ–½ï¼š**
- å§‹ç»ˆåœ¨CMakeä¸­è®¾ç½®`CMAKE_CXX_STANDARD_REQUIRED ON`
- æ–‡æ¡£ä¸­æ˜ç¡®è¯´æ˜C++20è¦æ±‚
- åœ¨READMEä¸­åˆ—å‡ºæœ€ä½ç¼–è¯‘å™¨ç‰ˆæœ¬

---

### ğŸ”´ é—®é¢˜1.2: std::countr_zeroæœªæ‰¾åˆ°

**ä¸¥é‡ç¨‹åº¦ï¼š** ä¸­  
**å‘ç”Ÿæ—¶é—´ï¼š** Week 1 (é¢„æœŸ)  
**é”™è¯¯ä¿¡æ¯ï¼š**
```
error: 'countr_zero' is not a member of 'std'
```

**æ ¹æœ¬åŸå› ï¼š**
- åŒæ ·æ˜¯C++20 `<bit>` å¤´æ–‡ä»¶ä¸­çš„åŠŸèƒ½
- ä¾èµ–é—®é¢˜1.1çš„è§£å†³æ–¹æ¡ˆ

**è§£å†³æ–¹æ¡ˆï¼š**
- ä¸é—®é¢˜1.1ç›¸åŒï¼Œç¡®ä¿C++20æ ‡å‡†
- åŒ…å« `#include <bit>` å¤´æ–‡ä»¶

**æ›¿ä»£æ–¹æ¡ˆï¼ˆC++17å…¼å®¹ï¼‰ï¼š**
```cpp
// å¦‚æœå¿…é¡»æ”¯æŒC++17
inline int countr_zero_fallback(uint64_t x) {
    if (x == 0) return 64;
    int count = 0;
    while ((x & 1) == 0) {
        x >>= 1;
        count++;
    }
    return count;
}

// ä½¿ç”¨æ¡ä»¶ç¼–è¯‘
#if __cplusplus >= 202002L
    using std::countr_zero;
#else
    #define countr_zero countr_zero_fallback
#endif
```

---

### ğŸ”´ é—®é¢˜1.3: Bitboardä½æ“ä½œç¼–è¯‘è­¦å‘Š

**ä¸¥é‡ç¨‹åº¦ï¼š** ä½  
**å¯èƒ½å‡ºç°ï¼š** Week 1-2  
**è­¦å‘Šä¿¡æ¯ï¼š**
```
warning: implicit conversion changes signedness
warning: shift count >= width of type
```

**æ ¹æœ¬åŸå› ï¼š**
- ä½ç§»æ“ä½œå¯èƒ½è¶…å‡ºç±»å‹å®½åº¦
- uint64_t å’Œ int ç±»å‹æ··ç”¨

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ˜¾å¼ç±»å‹è½¬æ¢ï¼š**
```cpp
// ä¸å¥½
uint64_t mask = 1 << pos;  // poså¯èƒ½>31

// æ­£ç¡®
uint64_t mask = 1ULL << pos;
```

2. **èŒƒå›´æ£€æŸ¥ï¼š**
```cpp
inline uint64_t bit_at(int pos) {
    assert(pos >= 0 && pos < 64);
    return 1ULL << pos;
}
```

3. **ä½¿ç”¨constexprï¼š**
```cpp
constexpr uint64_t EDGE_MASK = 0xFF818181818181FFULL;
```

---

### ğŸŸ¡ é—®é¢˜1.4: å¤´æ–‡ä»¶å¾ªç¯ä¾èµ–

**ä¸¥é‡ç¨‹åº¦ï¼š** ä¸­  
**å¯èƒ½å‡ºç°ï¼š** Week 2-3  
**é”™è¯¯ä¿¡æ¯ï¼š**
```
error: invalid use of incomplete type
```

**é¢„é˜²æ–¹æ¡ˆï¼š**

1. **å‰å‘å£°æ˜ï¼š**
```cpp
// Board.hpp
class Move;  // å‰å‘å£°æ˜

class Board {
    std::vector<Move> get_legal_moves() const;
};
```

2. **Pimplæƒ¯ç”¨æ³•ï¼š**
```cpp
// éšè—å®ç°ç»†èŠ‚
class Board {
    struct Impl;
    std::unique_ptr<Impl> pimpl;
};
```

3. **å¤´æ–‡ä»¶é¡ºåºï¼š**
```cpp
// æ­£ç¡®é¡ºåº
#include <ç³»ç»Ÿå¤´æ–‡ä»¶>
#include <ç¬¬ä¸‰æ–¹åº“>
#include "é¡¹ç›®å¤´æ–‡ä»¶"
```

---

## 2. æ„å»ºç³»ç»Ÿé—®é¢˜

### ğŸ”´ é—®é¢˜2.1: CMake PowerShellè¾“å‡ºé—®é¢˜

**ä¸¥é‡ç¨‹åº¦ï¼š** ä¸­  
**å‘ç”Ÿæ—¶é—´ï¼š** Week 1, Day 1  
**ç°è±¡ï¼š**
- CMakeå‘½ä»¤åœ¨PowerShellä¸­æ— è¾“å‡º
- æ— æ³•çœ‹åˆ°é…ç½®è¿‡ç¨‹
- ä¸çŸ¥é“æ˜¯å¦æˆåŠŸ

**æ ¹æœ¬åŸå› ï¼š**
- PowerShellçš„è¾“å‡ºé‡å®šå‘æœºåˆ¶
- CMakeçš„é”™è¯¯è¾“å‡ºå¯èƒ½è¢«æŠ‘åˆ¶
- Windowsç»ˆç«¯ç¼–ç é—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**

1. **åˆ›å»ºç›´æ¥ç¼–è¯‘è„šæœ¬ï¼ˆquick_compile.batï¼‰ï¼š**
```batch
@echo off
echo Compiling Reversi AI...
g++ -std=c++20 -O2 ^
    src/core/Board.cpp ^
    src/core/Move.cpp ^
    ... ^
    -o reversi_ai.exe
```

2. **CMakeè¾“å‡ºé‡å®šå‘ï¼š**
```batch
cmake -B build -G "MinGW Makefiles" 2>&1 | Out-Host
```

3. **ä½¿ç”¨CMDè€ŒéPowerShellï¼š**
```batch
# åœ¨build.batä¸­å¼ºåˆ¶ä½¿ç”¨CMD
cmd /c cmake ...
```

**å½“å‰çŠ¶æ€ï¼š**
- âœ… quick_compile.bat å¯é å·¥ä½œ
- â³ CMakeæ–¹æ³•å¾…æ”¹è¿›
- âœ… æä¾›å¤šç§æ„å»ºé€‰æ‹©

---

### ğŸŸ¡ é—®é¢˜2.2: CMakeæ‰¾ä¸åˆ°ç¼–è¯‘å™¨

**ä¸¥é‡ç¨‹åº¦ï¼š** é«˜  
**å¯èƒ½å‡ºç°ï¼š** æ–°ç¯å¢ƒè®¾ç½®æ—¶  
**é”™è¯¯ä¿¡æ¯ï¼š**
```
CMake Error: CMAKE_C_COMPILER not set
```

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ‰‹åŠ¨æŒ‡å®šç¼–è¯‘å™¨ï¼š**
```batch
cmake -B build ^
    -G "MinGW Makefiles" ^
    -DCMAKE_C_COMPILER=gcc ^
    -DCMAKE_CXX_COMPILER=g++
```

2. **æ£€æŸ¥PATHç¯å¢ƒå˜é‡ï¼š**
```batch
where gcc
where g++
# åº”è¯¥æ˜¾ç¤ºç¼–è¯‘å™¨è·¯å¾„
```

3. **ä½¿ç”¨å®Œæ•´è·¯å¾„ï¼š**
```cmake
set(CMAKE_C_COMPILER "C:/msys64/mingw64/bin/gcc.exe")
set(CMAKE_CXX_COMPILER "C:/msys64/mingw64/bin/g++.exe")
```

---

### ğŸŸ¡ é—®é¢˜2.3: é“¾æ¥å™¨é”™è¯¯ - undefined reference

**ä¸¥é‡ç¨‹åº¦ï¼š** ä¸­  
**å¯èƒ½å‡ºç°ï¼š** æ·»åŠ æ–°æ¨¡å—æ—¶  
**é”™è¯¯ä¿¡æ¯ï¼š**
```
undefined reference to `Board::get_legal_moves()'
```

**å¸¸è§åŸå› ï¼š**
1. å¿˜è®°ç¼–è¯‘å¯¹åº”çš„.cppæ–‡ä»¶
2. CMakeLists.txtä¸­ç¼ºå°‘æºæ–‡ä»¶
3. å‡½æ•°å£°æ˜ä¸å®šä¹‰ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ£€æŸ¥CMakeLists.txtï¼š**
```cmake
add_library(core
    src/core/Board.cpp    # ç¡®ä¿åŒ…å«
    src/core/Move.cpp
)
```

2. **æ£€æŸ¥quick_compile.batï¼š**
```batch
g++ ... src/core/Board.cpp ...  # ç¡®ä¿åŒ…å«
```

3. **éªŒè¯å‡½æ•°ç­¾åï¼š**
```cpp
// .hpp
std::vector<Move> get_legal_moves() const;

// .cpp
std::vector<Move> Board::get_legal_moves() const { ... }
```

---

## 3. åº“ä¾èµ–é—®é¢˜

### ğŸŸ¡ é—®é¢˜3.1: SFMLå®‰è£…ä¸é“¾æ¥

**ä¸¥é‡ç¨‹åº¦ï¼š** é«˜  
**é¢„è®¡å‡ºç°ï¼š** Week 7  
**é¢„é˜²æ–¹æ¡ˆï¼š**

**å‚è€ƒé¡¹ç›®ç»éªŒï¼ˆä»SFMLé¡¹ç›®ï¼‰ï¼š**

1. **ä½¿ç”¨Scoopå®‰è£…ï¼š**
```bash
scoop install sfml
```

2. **CMakeé…ç½®ï¼š**
```cmake
find_package(SFML 2.5 COMPONENTS graphics window system REQUIRED)

target_link_libraries(reversi_ui
    PRIVATE
    sfml-graphics
    sfml-window
    sfml-system
)
```

3. **å¸¸è§é“¾æ¥é”™è¯¯ï¼š**
```
undefined reference to sf::RenderWindow::...
```
è§£å†³ï¼šç¡®ä¿é“¾æ¥æ‰€æœ‰éœ€è¦çš„SFMLç»„ä»¶

4. **DLLé—®é¢˜ï¼ˆWindowsï¼‰ï¼š**
- å¤åˆ¶SFML DLLåˆ°exeç›®å½•
- æˆ–æ·»åŠ åˆ°PATH
- æˆ–é™æ€é“¾æ¥ï¼ˆSFML_STATIC_LIBRARIESï¼‰

---

### ğŸŸ¡ é—®é¢˜3.2: Google Testé›†æˆ

**ä¸¥é‡ç¨‹åº¦ï¼š** ä¸­  
**é¢„è®¡å‡ºç°ï¼š** Week 3  
**é¢„é˜²æ–¹æ¡ˆï¼š**

**ä»å‚è€ƒé¡¹ç›®å­¦ä¹ ï¼š**

1. **ä½¿ç”¨FetchContentï¼ˆæ¨èï¼‰ï¼š**
```cmake
include(FetchContent)
FetchContent_Declare(
  googletest
  GIT_REPOSITORY https://github.com/google/googletest.git
  GIT_TAG release-1.12.1
)
FetchContent_MakeAvailable(googletest)
```

2. **æµ‹è¯•ç›®æ ‡ï¼š**
```cmake
add_executable(test_board
    tests/test_board.cpp
)
target_link_libraries(test_board
    PRIVATE
    core
    gtest_main
)
```

3. **å¸¸è§é—®é¢˜ï¼š**
- ç½‘ç»œé—®é¢˜ï¼šä½¿ç”¨æœ¬åœ°æºæˆ–é•œåƒ
- ç‰ˆæœ¬å†²çªï¼šæŒ‡å®šå…·ä½“tag
- é“¾æ¥é¡ºåºï¼šgtest_mainæ”¾æœ€å

---

## 4. å‚è€ƒé¡¹ç›®é›†æˆé—®é¢˜

### ğŸ”´ é—®é¢˜4.1: Pythonä¸C++é¡¹ç›®æ··åˆ

**ä¸¥é‡ç¨‹åº¦ï¼š** é«˜  
**æ¶‰åŠé¡¹ç›®ï¼š** alpha-zero-general, AlphaZero_Gomoku  
**é¢„è®¡å‡ºç°ï¼š** Week 9-10

**é—®é¢˜åˆ†æï¼š**
- alpha-zero-generalæ˜¯çº¯Pythonå®ç°
- æˆ‘ä»¬çš„é¡¹ç›®æ˜¯C++
- éœ€è¦ç†è§£ç®—æ³•è€Œéç›´æ¥ç§»æ¤ä»£ç 

**è§£å†³æ–¹æ¡ˆï¼š**

1. **ä»…å­¦ä¹ ç®—æ³•æ€æƒ³ï¼š**
   - ç ”ç©¶MCTSå®ç°é€»è¾‘
   - ç†è§£ç¥ç»ç½‘ç»œæ¥å£
   - ä¸ç›´æ¥å¤åˆ¶Pythonä»£ç 

2. **C++é‡æ–°å®ç°ï¼š**
   - å‚è€ƒé€»è¾‘ç»“æ„
   - ç”¨C++æƒ¯ç”¨æ³•é‡å†™
   - ä¿æŒä»£ç é£æ ¼ä¸€è‡´

3. **å¯é€‰ï¼šPythonç»‘å®šï¼ˆé«˜çº§ï¼‰ï¼š**
```cpp
// ä½¿ç”¨pybind11ï¼ˆå¦‚æœçœŸéœ€è¦Pythonäº’æ“ä½œï¼‰
#include <pybind11/pybind11.h>

PYBIND11_MODULE(reversi_engine, m) {
    py::class_<Board>(m, "Board")
        .def(py::init<>())
        .def("get_legal_moves", &Board::get_legal_moves);
}
```

---

### ğŸŸ¡ é—®é¢˜4.2: Rusté¡¹ç›®å‚è€ƒ

**ä¸¥é‡ç¨‹åº¦ï¼š** ä¸­  
**æ¶‰åŠé¡¹ç›®ï¼š** reversi (Rustå®ç°)  
**é¢„è®¡å‡ºç°ï¼š** Week 3-4

**é—®é¢˜åˆ†æï¼š**
- reversié¡¹ç›®ç”¨Rustç¼–å†™
- è¯­æ³•å’Œæƒ¯ç”¨æ³•å®Œå…¨ä¸åŒ
- æœ‰ä»·å€¼çš„ç®—æ³•æ€æƒ³

**è§£å†³æ–¹æ¡ˆï¼š**

1. **ç†è§£Rustæ¦‚å¿µæ˜ å°„ï¼š**
```rust
// Rust
impl Board {
    fn get_legal_moves(&self) -> Vec<Move> { ... }
}

// C++ç­‰ä»·
class Board {
    std::vector<Move> get_legal_moves() const { ... }
};
```

2. **å…³æ³¨ç®—æ³•æ ¸å¿ƒï¼š**
   - Bitboardæ“ä½œé€»è¾‘
   - Minimaxæœç´¢ç»“æ„
   - è¯„ä¼°å‡½æ•°è®¾è®¡

3. **ä¸è¦ç›´æ¥è½¬è¯‘ä»£ç ï¼š**
   - Rustçš„æ‰€æœ‰æƒ != C++çš„RAII
   - ä½¿ç”¨C++æƒ¯ç”¨æ³•é‡å†™

---

### ğŸŸ¡ é—®é¢˜4.3: Egaroucidé¡¹ç›®å­¦ä¹ 

**ä¸¥é‡ç¨‹åº¦ï¼š** ä¸­  
**æ¶‰åŠé¡¹ç›®ï¼š** Egaroucid (é«˜åº¦ä¼˜åŒ–çš„C++å¼•æ“)  
**é¢„è®¡å‡ºç°ï¼š** Week 10-11

**æŒ‘æˆ˜ï¼š**
- ä»£ç é«˜åº¦ä¼˜åŒ–ï¼Œéš¾ä»¥ç†è§£
- å¤§é‡SIMDæŒ‡ä»¤
- å¹³å°ç›¸å…³ä»£ç 

**å»ºè®®æ–¹æ³•ï¼š**

1. **æ¸è¿›å¼å­¦ä¹ ï¼š**
   - å…ˆå®ç°åŸºç¡€ç‰ˆæœ¬
   - ç†è§£ä¼˜åŒ–æ€è·¯
   - é€‰æ‹©æ€§åº”ç”¨æŠ€æœ¯

2. **é‡ç‚¹å…³æ³¨ï¼š**
   - BitboardæŠ€å·§
   - æœç´¢å‰ªæç­–ç•¥
   - è¯„ä¼°å‡½æ•°è®¾è®¡

3. **é¿å…è¿‡æ—©ä¼˜åŒ–ï¼š**
   - å…ˆä¿è¯æ­£ç¡®æ€§
   - å†è¿½æ±‚æ€§èƒ½
   - ä½¿ç”¨profileræŒ‡å¯¼ä¼˜åŒ–

**æ–‡ä»¶ä½ç½®å‚è€ƒï¼š**
```
Egaroucid/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ engine/        # æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ midsearch/     # ä¸­ç›˜æœç´¢
â”‚   â””â”€â”€ endsearch/     # ç»ˆç›˜æœç´¢
â””â”€â”€ benchmark/         # æ€§èƒ½æµ‹è¯•
```

---

### ğŸŸ¢ é—®é¢˜4.4: ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜

**ä¸¥é‡ç¨‹åº¦ï¼š** ä½  
**é¢„é˜²æªæ–½ï¼š**

**ä»å‚è€ƒé¡¹ç›®ä¸­è§‚å¯Ÿåˆ°çš„ç‰ˆæœ¬è¦æ±‚ï¼š**

1. **Pythoné¡¹ç›®ï¼ˆalpha-zero-generalï¼‰ï¼š**
   - Python 3.6+
   - TensorFlow 2.x / PyTorch 1.x
   - æˆ‘ä»¬ä¸ç›´æ¥ä¾èµ–ï¼Œä»…å‚è€ƒ

2. **C++é¡¹ç›®ï¼ˆEgaroucidï¼‰ï¼š**
   - C++17/20
   - CMake 3.10+
   - ä¸æˆ‘ä»¬çš„è®¾ç½®å…¼å®¹ âœ…

3. **Rusté¡¹ç›®ï¼ˆreversiï¼‰ï¼š**
   - Rust 1.50+
   - æˆ‘ä»¬ä¸éœ€è¦Rustç¯å¢ƒ

**è®°å½•åœ¨æ–‡æ¡£ä¸­ï¼š**
```markdown
# å‚è€ƒé¡¹ç›®ç‰ˆæœ¬å…¼å®¹æ€§

| é¡¹ç›® | è¯­è¨€ | æˆ‘ä»¬çš„ä½¿ç”¨æ–¹å¼ | ä¾èµ–éœ€æ±‚ |
|------|------|---------------|----------|
| alpha-zero-general | Python | ç®—æ³•å­¦ä¹  | æ—  |
| Egaroucid | C++17 | ä»£ç å‚è€ƒ | æ— æ–°å¢ |
| reversi | Rust | æ€è·¯å‚è€ƒ | æ—  |
```

---

## 5. æ€§èƒ½ä¸ä¼˜åŒ–é—®é¢˜

### ğŸŸ¡ é—®é¢˜5.1: Debug vs Releaseæ€§èƒ½å·®å¼‚

**ä¸¥é‡ç¨‹åº¦ï¼š** ä¸­  
**é¢„è®¡å‡ºç°ï¼š** Week 6+

**ç°è±¡ï¼š**
- Debugç‰ˆæœ¬æ…¢10-100å€
- å¿˜è®°åˆ‡æ¢Releaseæ¨¡å¼

**è§£å†³æ–¹æ¡ˆï¼š**

1. **CMakeæ„å»ºç±»å‹ï¼š**
```bash
# Debugï¼ˆå¼€å‘æ—¶ï¼‰
cmake -B build -DCMAKE_BUILD_TYPE=Debug

# Releaseï¼ˆæµ‹è¯•æ€§èƒ½æ—¶ï¼‰
cmake -B build -DCMAKE_BUILD_TYPE=Release
```

2. **quick_compile.batæ·»åŠ ä¼˜åŒ–ï¼š**
```batch
# Debugç‰ˆæœ¬
g++ -std=c++20 -g -O0 ...

# Releaseç‰ˆæœ¬ï¼ˆå½“å‰ï¼‰
g++ -std=c++20 -O2 -DNDEBUG ...

# æœ€å¤§ä¼˜åŒ–
g++ -std=c++20 -O3 -march=native -DNDEBUG ...
```

3. **æ¡ä»¶ç¼–è¯‘ï¼š**
```cpp
#ifdef NDEBUG
    // Releaseä¼˜åŒ–ä»£ç 
#else
    // Debugæ£€æŸ¥ä»£ç 
    assert(pos >= 0 && pos < 64);
#endif
```

---

### ğŸŸ¡ é—®é¢˜5.2: å†…å­˜æ³„æ¼

**ä¸¥é‡ç¨‹åº¦ï¼š** é«˜  
**é¢„è®¡å‡ºç°ï¼š** Week 8-10

**é¢„é˜²æªæ–½ï¼š**

1. **ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼š**
```cpp
// ä¸å¥½
AIStrategy* ai = new MinimaxEngine();
// ...å¯èƒ½å¿˜è®°delete

// å¥½
auto ai = std::make_unique<MinimaxEngine>();
// è‡ªåŠ¨æ¸…ç†
```

2. **ä½¿ç”¨Valgrindï¼ˆLinuxï¼‰æˆ–Dr. Memoryï¼ˆWindowsï¼‰ï¼š**
```bash
# Windows
drmemory -- reversi_ai.exe
```

3. **RAIIåŸåˆ™ï¼š**
```cpp
class TranspositionTable {
    std::vector<Entry> table;  // è‡ªåŠ¨ç®¡ç†
    // æ— éœ€æ‰‹åŠ¨delete
};
```

---

## 6. å¹³å°å…¼å®¹æ€§é—®é¢˜

### ğŸŸ¡ é—®é¢˜6.1: Windowsç‰¹å®šè·¯å¾„

**ä¸¥é‡ç¨‹åº¦ï¼š** ä½  
**å½“å‰çŠ¶æ€ï¼š** ä½¿ç”¨ä¸­

**é—®é¢˜ï¼š**
```cpp
// ç¡¬ç¼–ç Windowsè·¯å¾„
"D:\\project\\data\\openings.txt"  // å…¶ä»–äººæ— æ³•ä½¿ç”¨
```

**è§£å†³æ–¹æ¡ˆï¼š**

1. **ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼š**
```cpp
"data/openings.txt"  // è·¨å¹³å°
```

2. **ä½¿ç”¨std::filesystemï¼ˆC++17ï¼‰ï¼š**
```cpp
#include <filesystem>
namespace fs = std::filesystem;

fs::path data_dir = fs::current_path() / "data";
fs::path opening_file = data_dir / "openings.txt";
```

3. **ç¯å¢ƒå˜é‡ï¼š**
```cpp
const char* data_dir = std::getenv("REVERSI_DATA_DIR");
```

---

## 7. è°ƒè¯•æŠ€å·§

### ğŸ”§ æŠ€å·§7.1: Bitboardå¯è§†åŒ–

**é—®é¢˜ï¼š** éš¾ä»¥ç†è§£64ä½æ•´æ•°çš„æ£‹ç›˜çŠ¶æ€

**è§£å†³æ–¹æ¡ˆï¼š**
```cpp
void print_bitboard(uint64_t bb) {
    std::cout << "Bitboard (hex): 0x" 
              << std::hex << bb << std::dec << "\n";
    for (int rank = 7; rank >= 0; --rank) {
        for (int file = 0; file < 8; ++file) {
            int pos = rank * 8 + file;
            std::cout << ((bb & (1ULL << pos)) ? "1 " : ". ");
        }
        std::cout << "\n";
    }
}
```

**å·²å®ç°ï¼š** Board::print() âœ…

---

### ğŸ”§ æŠ€å·§7.2: æœç´¢æ ‘å¯è§†åŒ–

**é¢„è®¡éœ€è¦ï¼š** Week 3-4

**æ–¹æ¡ˆï¼š**
```cpp
struct SearchNode {
    Move move;
    int eval;
    int depth;
    std::vector<SearchNode> children;
};

void print_search_tree(const SearchNode& node, int indent = 0) {
    std::cout << std::string(indent, ' ') 
              << node.move.to_string() 
              << " (" << node.eval << ")\n";
    for (const auto& child : node.children) {
        print_search_tree(child, indent + 2);
    }
}
```

---

### ğŸ”§ æŠ€å·§7.3: æ€§èƒ½åˆ†æ

**å·¥å…·é€‰æ‹©ï¼š**

1. **Windowsï¼š**
   - Very Sleepy (GUI profiler)
   - Visual Studio Profiler

2. **è·¨å¹³å°ï¼š**
   - gprof (å†…ç½®)
   - perf (Linux)
   - Instruments (macOS)

3. **ä»£ç çº§åˆ«ï¼š**
```cpp
#include <chrono>

class Timer {
    using Clock = std::chrono::high_resolution_clock;
    Clock::time_point start;
public:
    Timer() : start(Clock::now()) {}
    
    double elapsed_ms() const {
        auto end = Clock::now();
        return std::chrono::duration<double, std::milli>(
            end - start
        ).count();
    }
};

// ä½¿ç”¨
Timer t;
// ... ä»£ç  ...
std::cout << "Time: " << t.elapsed_ms() << " ms\n";
```

**å·²å®ç°ï¼š** Benchmarkç±»æ¡†æ¶ âœ…

---

## 8. é¢„é˜²æªæ–½

### âœ… æ¸…å•8.1: ä»£ç å®¡æŸ¥æ£€æŸ¥é¡¹

**æ·»åŠ æ–°åŠŸèƒ½å‰ï¼š**
- [ ] ç¡®è®¤C++20ç‰¹æ€§å¯ç”¨
- [ ] æ£€æŸ¥å¤´æ–‡ä»¶ä¾èµ–
- [ ] æ›´æ–°CMakeLists.txt
- [ ] æ›´æ–°quick_compile.bat
- [ ] æ·»åŠ å¿…è¦çš„é”™è¯¯æ£€æŸ¥
- [ ] è€ƒè™‘è¾¹ç•Œæƒ…å†µ

**æäº¤ä»£ç å‰ï¼š**
- [ ] Debugå’ŒReleaseéƒ½èƒ½ç¼–è¯‘
- [ ] æ²¡æœ‰è­¦å‘Šï¼ˆ-Wall -Wextraï¼‰
- [ ] ä»£ç æ ¼å¼ç»Ÿä¸€
- [ ] æ·»åŠ æ³¨é‡Š
- [ ] æ›´æ–°æ–‡æ¡£

---

### âœ… æ¸…å•8.2: å‚è€ƒå¤–éƒ¨é¡¹ç›®æ—¶

**æ­¥éª¤ï¼š**
1. **äº†è§£é¡¹ç›®ï¼š**
   - [ ] é˜…è¯»README
   - [ ] æ£€æŸ¥LICENSEï¼ˆç¡®ä¿å¯ä»¥å‚è€ƒï¼‰
   - [ ] æŸ¥çœ‹è¯­è¨€å’Œç‰ˆæœ¬è¦æ±‚

2. **æå–ä»·å€¼ï¼š**
   - [ ] ç†è§£ç®—æ³•æ€æƒ³ï¼ˆè€Œéå¤åˆ¶ä»£ç ï¼‰
   - [ ] è®°å½•å…³é”®æŠ€å·§
   - [ ] é€‚é…åˆ°æˆ‘ä»¬çš„æ¶æ„

3. **é¿å…é™·é˜±ï¼š**
   - [ ] ä¸è¦ç›´æ¥å¤åˆ¶ç²˜è´´å¤§æ®µä»£ç 
   - [ ] æ³¨æ„è¯­è¨€å·®å¼‚ï¼ˆPython/Rustâ†’C++ï¼‰
   - [ ] è­¦æƒ•è¿‡åº¦ä¼˜åŒ–çš„ä»£ç 

4. **è®°å½•æ¥æºï¼š**
```cpp
// å‚è€ƒè‡ª: Egaroucid - src/engine/board.hpp
// æ€è·¯: ä½¿ç”¨æ–¹å‘æ©ç ä¼˜åŒ–è¾¹ç•Œæ£€æŸ¥
// é€‚é…: æ”¹ä¸ºæˆ‘ä»¬çš„Boardç±»å®ç°
```

---

### âœ… æ¸…å•8.3: ç‰ˆæœ¬å‡çº§å‡†å¤‡

**å½“éœ€è¦å‡çº§æ—¶ï¼ˆå¦‚C++23ï¼‰ï¼š**

1. **æµ‹è¯•æ–°ç‰¹æ€§ï¼š**
```cpp
// test_cpp23.cpp
#if __cplusplus >= 202302L
    #include <expected>
    // æµ‹è¯•æ–°ç‰¹æ€§
#endif
```

2. **ä¿æŒå‘åå…¼å®¹ï¼š**
```cpp
#if __cplusplus >= 202002L
    #include <bit>
    using std::popcount;
#else
    #include "fallback/bit_ops.hpp"
#endif
```

3. **æ–‡æ¡£æ›´æ–°ï¼š**
   - READMEä¸­çš„è¦æ±‚
   - æ„å»ºè¯´æ˜
   - CI/CDé…ç½®ï¼ˆå¦‚æœ‰ï¼‰

---

## ğŸ“š å‚è€ƒé¡¹ç›®ç‰¹å®šé—®é¢˜

### é¡¹ç›®ï¼šalpha-zero-general (Python)

**è¯­è¨€å·®å¼‚ï¼š**
| Python | C++ç­‰ä»· | æ³¨æ„äº‹é¡¹ |
|--------|---------|----------|
| `list` | `std::vector` | åŠ¨æ€å¤§å° |
| `dict` | `std::unordered_map` | å“ˆå¸Œè¡¨ |
| `numpy.array` | `std::vector` æˆ–åŸå§‹æ•°ç»„ | è€ƒè™‘æ€§èƒ½ |
| åŠ¨æ€ç±»å‹ | æ¨¡æ¿æˆ–variant | ç±»å‹å®‰å…¨ |

**MCTSå®ç°å‚è€ƒï¼š**
- æ–‡ä»¶ï¼š`MCTS.py`
- å…³é”®ç±»ï¼š`MCTS`, `Node`
- æˆ‘ä»¬çš„å®ç°ï¼š`src/ai/MCTSEngine.hpp`ï¼ˆWeek 9ï¼‰

---

### é¡¹ç›®ï¼šEgaroucid (C++)

**ä»£ç é£æ ¼å·®å¼‚ï¼š**
```cpp
// Egaroucidé£æ ¼ï¼ˆé«˜åº¦ä¼˜åŒ–ï¼‰
#define flip_line(OP, line) (...å¤æ‚å®...)

// æˆ‘ä»¬çš„é£æ ¼ï¼ˆæ¸…æ™°ä¼˜å…ˆï¼‰
inline uint64_t flip_in_direction(
    uint64_t player, 
    uint64_t opponent, 
    int direction
) {
    // æ¸…æ™°çš„é€»è¾‘
}
```

**å­¦ä¹ é‡ç‚¹ï¼š**
- `src/engine/bit.hpp` - BitboardæŠ€å·§
- `src/midsearch/` - ä¸­ç›˜æœç´¢ä¼˜åŒ–
- `benchmark/` - æ€§èƒ½æµ‹è¯•æ–¹æ³•

**æ³¨æ„ï¼š**
- ä»£ç é«˜åº¦ä¼˜åŒ–ï¼Œä¸æ˜“ç†è§£
- å…ˆå®ç°åŸºç¡€ç‰ˆæœ¬
- æ€§èƒ½å…³é”®æ—¶å†å‚è€ƒä¼˜åŒ–

---

### é¡¹ç›®ï¼šreversi (Rust)

**æ¦‚å¿µæ˜ å°„ï¼š**
```rust
// Rust
pub fn get_moves(&self) -> Vec<Move> {
    let mut moves = Vec::new();
    // ...
    moves
}

// C++
std::vector<Move> get_moves() const {
    std::vector<Move> moves;
    // ...
    return moves;  // æˆ–ä½¿ç”¨RVO
}
```

**Rustç‰¹æ€§ vs C++ï¼š**
| Rust | C++ | è¯´æ˜ |
|------|-----|------|
| `&self` | `const this*` | ä¸å¯å˜å¼•ç”¨ |
| `&mut self` | `this*` | å¯å˜å¼•ç”¨ |
| `Option<T>` | `std::optional<T>` | å¯é€‰å€¼ |
| `Result<T, E>` | `std::expected<T, E>` (C++23) | é”™è¯¯å¤„ç† |

---

## ğŸ”® é¢„æœŸæœªæ¥é—®é¢˜

### Week 3-6: AIå¼•æ“å¼€å‘

**å¯èƒ½é—®é¢˜ï¼š**
1. **é€’å½’æ·±åº¦é™åˆ¶** - æ ˆæº¢å‡º
   - è§£å†³ï¼šè¿­ä»£åŠ æ·±æœç´¢
   
2. **ç½®æ¢è¡¨ç¢°æ’** - å“ˆå¸Œå†²çª
   - è§£å†³ï¼šZobristå“ˆå¸Œ + ç¢°æ’æ£€æµ‹

3. **Move orderingæ•ˆæœä¸ä½³** - å‰ªææ•ˆç‡ä½
   - è§£å†³ï¼šå†å²å¯å‘ + Killer moves

### Week 7-8: UIä¸ç½‘ç»œ

**å¯èƒ½é—®é¢˜ï¼š**
1. **SFMLçª—å£é—ªçƒ** - åˆ·æ–°é—®é¢˜
   - è§£å†³ï¼šåŒç¼“å†² + å‚ç›´åŒæ­¥

2. **ç½‘ç»œå»¶è¿Ÿ** - ç”¨æˆ·ä½“éªŒå·®
   - è§£å†³ï¼šå¼‚æ­¥IO + çŠ¶æ€é¢„æµ‹

3. **çº¿ç¨‹å®‰å…¨** - ç«æ€æ¡ä»¶
   - è§£å†³ï¼šstd::mutex + æ¶ˆæ¯é˜Ÿåˆ—

### Week 9-11: MCTSä¸ä¼˜åŒ–

**å¯èƒ½é—®é¢˜ï¼š**
1. **MCTSæ”¶æ•›æ…¢** - éœ€è¦å¾ˆå¤šæ¨¡æ‹Ÿ
   - è§£å†³ï¼šUCBå‚æ•°è°ƒä¼˜ + å¹¶è¡ŒåŒ–

2. **å†…å­˜å ç”¨å¤§** - æœç´¢æ ‘çˆ†ç‚¸
   - è§£å†³ï¼šèŠ‚ç‚¹æ±  + åƒåœ¾å›æ”¶

3. **æ€§èƒ½ç“¶é¢ˆ** - éš¾ä»¥å®šä½
   - è§£å†³ï¼šProfiler + ç®—æ³•åˆ†æ

---

## ğŸ“‹ é—®é¢˜æŠ¥å‘Šæ¨¡æ¿

**å½“é‡åˆ°æ–°é—®é¢˜æ—¶ï¼Œä½¿ç”¨æ­¤æ¨¡æ¿è®°å½•ï¼š**

```markdown
### ğŸ”´ é—®é¢˜X.Y: [é—®é¢˜ç®€è¿°]

**ä¸¥é‡ç¨‹åº¦ï¼š** é«˜/ä¸­/ä½
**å‘ç”Ÿæ—¶é—´ï¼š** Week X, Day Y
**é”™è¯¯ä¿¡æ¯ï¼š**
```
[é”™è¯¯ä¿¡æ¯]
```

**æ ¹æœ¬åŸå› ï¼š**
[åˆ†æåŸå› ]

**è§£å†³æ–¹æ¡ˆï¼š**
[æ­¥éª¤]

**é¢„é˜²æªæ–½ï¼š**
[å¦‚ä½•é¿å…]

**ç›¸å…³æ–‡ä»¶ï¼š**
- file1.cpp
- file2.hpp
```

---

## âœ… Week 1 å®é™…é‡åˆ°çš„é—®é¢˜ï¼ˆ2025-10-11ï¼‰

### ğŸ”´ é—®é¢˜W1.1: åˆæ³•ç§»åŠ¨ç”Ÿæˆ - è¾¹ç•ŒWraparound

**ä¸¥é‡ç¨‹åº¦ï¼š** é«˜  
**å‘ç”Ÿæ—¶é—´ï¼š** Week 1, Day 3  
**é—®é¢˜æè¿°ï¼š**
- å®ç°æ–¹å‘æ‰«ææ—¶ï¼Œä½ç§»æ“ä½œåœ¨æ£‹ç›˜è¾¹ç¼˜äº§ç”Ÿé”™è¯¯ç»“æœ
- ä¾‹å¦‚ï¼šAåˆ—çš„æ£‹å­å·¦ç§»1ä½ä¼šå‡ºç°åœ¨Håˆ—ï¼ˆä½ç¯ç»•ï¼‰

**å…·ä½“è¡¨ç°ï¼š**
```cpp
// A1ä½ç½® (pos=0, bit=0x1)
uint64_t left = bb << 1;  // å˜æˆ 0x2 (B1) âœ…
// A2ä½ç½® (pos=8, bit=0x100)  
uint64_t left = bb << 1;  // å˜æˆ 0x200 (B2) âœ…
// ä½†ä»A8 (pos=56) è¿ç»­å·¦ç§»ä¼šç¯ç»•åˆ°H7!
```

**æ ¹æœ¬åŸå› ï¼š**
- 64ä½æ•´æ•°çš„ä½ç§»æ“ä½œä¸ç†è§£æ£‹ç›˜çš„8Ã—8ç»“æ„
- æ¯è¡Œ8ä¸ªä½ï¼Œä½†bitboardè¿ç»­å­˜å‚¨
- Aåˆ—(0,8,16...)å·¦ç§»ä¼šè¿›å…¥å‰ä¸€è¡Œçš„Håˆ—

**è§£å†³æ–¹æ¡ˆï¼š**
```cpp
// Board.cpp - æ–¹å‘æ©ç 
constexpr uint64_t NOT_A_FILE = 0xFEFEFEFEFEFEFEFEULL; // Aåˆ—=0
constexpr uint64_t NOT_H_FILE = 0x7F7F7F7F7F7F7F7FULL; // Håˆ—=0

// å®‰å…¨çš„å·¦ç§»ï¼ˆé˜²æ­¢Aåˆ—ç¯ç»•ï¼‰
inline uint64_t shift_left(uint64_t bb) {
    return (bb & NOT_A_FILE) << 1;
}

// å®‰å…¨çš„å³ç§»ï¼ˆé˜²æ­¢Håˆ—ç¯ç»•ï¼‰
inline uint64_t shift_right(uint64_t bb) {
    return (bb & NOT_H_FILE) >> 1;
}

// å¯¹è§’çº¿ç§»åŠ¨éœ€è¦ç»„åˆæ©ç 
inline uint64_t shift_up_left(uint64_t bb) {
    return (bb & NOT_A_FILE) << 9;
}
```

**æµ‹è¯•éªŒè¯ï¼š**
```cpp
// A1ä½ç½®æµ‹è¯•
uint64_t a1 = 0x1;
assert(shift_left(a1) == 0);  // Aåˆ—å·¦ç§»åº”è¯¥è¿”å›0

// H1ä½ç½®æµ‹è¯•  
uint64_t h1 = 0x80;
assert(shift_right(h1) == 0); // Håˆ—å³ç§»åº”è¯¥è¿”å›0
```

**ç›¸å…³æ–‡ä»¶ï¼š**
- `src/core/Board.cpp` (lines 22-42)

**å‚è€ƒæ¥æºï¼š**
- Egaroucid: `src/engine/board.hpp` (æ©ç å®šä¹‰)
- Chess Programming Wiki: Bitboardç§»åŠ¨ç”Ÿæˆ

**ç»éªŒæ•™è®­ï¼š**
- Bitboardæ“ä½œå¿…é¡»è€ƒè™‘æ£‹ç›˜ç‰©ç†è¾¹ç•Œ
- æ‰€æœ‰æ–¹å‘ç§»åŠ¨éƒ½éœ€è¦å¯¹åº”çš„è¾¹ç•Œæ©ç 
- æµ‹è¯•è¾¹ç•Œæƒ…å†µè‡³å…³é‡è¦

---

### ğŸŸ¡ é—®é¢˜W1.2: åˆæ³•ç§»åŠ¨ç”Ÿæˆ - æ‰«æç»ˆæ­¢æ¡ä»¶

**ä¸¥é‡ç¨‹åº¦ï¼š** ä¸­  
**å‘ç”Ÿæ—¶é—´ï¼š** Week 1, Day 3  
**é—®é¢˜æè¿°ï¼š**
- åˆæœŸå®ç°çš„æ–¹å‘æ‰«æç”Ÿæˆäº†é”™è¯¯çš„åˆæ³•ç§»åŠ¨
- ç©ºä½è¢«è¯†åˆ«ä¸ºåˆæ³•ç§»åŠ¨ï¼Œä½†å®é™…æ— æ³•ç¿»è½¬ä»»ä½•æ£‹å­

**é”™è¯¯é€»è¾‘ï¼š**
```cpp
// âŒ é”™è¯¯çš„å®ç°
uint64_t scan_direction(uint64_t start, uint64_t player, uint64_t opp) {
    uint64_t shifted = shift(start);
    while ((shifted & opp) != 0) {
        shifted = shift(shifted);
    }
    return shifted;  // è¿”å›ç¬¬ä¸€ä¸ªéå¯¹æ‰‹çš„ä½ç½®ï¼ˆå¯èƒ½æ˜¯ç©ºä½ï¼ï¼‰
}
```

**æ ¹æœ¬åŸå› ï¼š**
- é»‘ç™½æ£‹çš„å¤¹å‡»è§„åˆ™ï¼šå¿…é¡»æ˜¯"å·±æ–¹-è¿ç»­å¯¹æ‰‹-å·±æ–¹"
- é”™è¯¯å®ç°åªæ£€æŸ¥äº†è¿ç»­çš„å¯¹æ‰‹æ£‹å­
- æœªéªŒè¯æ‰«ææœ«ç«¯æ˜¯å¦æ˜¯å·±æ–¹æ£‹å­

**æ­£ç¡®è§£å†³æ–¹æ¡ˆï¼š**
```cpp
// âœ… æ­£ç¡®çš„å®ç°
uint64_t scan_direction(uint64_t start_bb, uint64_t player, uint64_t opponent) {
    uint64_t shifted = shift(start_bb);
    
    // ç¬¬ä¸€æ­¥å¿…é¡»æ˜¯å¯¹æ‰‹æ£‹å­
    if ((shifted & opponent) == 0) {
        return 0;  // ç´§é‚»ä¸æ˜¯å¯¹æ‰‹ï¼Œæ— æ³•å¤¹å‡»
    }
    
    // ç´¯ç§¯ä¸­é—´çš„å¯¹æ‰‹æ£‹å­
    uint64_t candidates = 0;
    while ((shifted & opponent) != 0) {
        candidates |= shifted;  // è®°å½•è¿™äº›å¯¹æ‰‹æ£‹å­
        shifted = shift(shifted);
    }
    
    // æ£€æŸ¥æœ«ç«¯æ˜¯å¦æ˜¯å·±æ–¹æ£‹å­
    if ((shifted & player) != 0) {
        return candidates;  // ç¡®è®¤å¤¹å‡»æˆåŠŸ
    }
    
    return 0;  // æœ«ç«¯ä¸æ˜¯å·±æ–¹ï¼Œä¸èƒ½ç¿»è½¬
}
```

**å…³é”®ç‚¹ï¼š**
1. **èµ·å§‹æ£€æŸ¥**: ç´§é‚»ä½ç½®å¿…é¡»æ˜¯å¯¹æ‰‹
2. **ä¸­é—´æ‰«æ**: è¿ç»­çš„å¯¹æ‰‹æ£‹å­
3. **æœ«ç«¯éªŒè¯**: å¿…é¡»ä»¥å·±æ–¹æ£‹å­ç»“æŸ
4. **è¿”å›å€¼**: è¿”å›å¯ç¿»è½¬çš„å¯¹æ‰‹æ£‹å­bitboard

**æµ‹è¯•æ¡ˆä¾‹ï¼š**
```
åˆå§‹ä½ç½®:
  A B C D E F G H
4 . . . O X . . .

Black (X) åœ¨ D4:
- å‘å³æ‰«æ: E4(O) -> F4(X) âœ… å¯ä»¥ç¿»è½¬E4
- å‘å·¦æ‰«æ: C4(ç©º) âŒ ä¸èƒ½ç¿»è½¬ï¼ˆç´§é‚»æ˜¯ç©ºä½ï¼‰

ç»“æœ: D4 æ˜¯åˆæ³•ç§»åŠ¨ï¼ˆå¯ç¿»è½¬E4çš„Oï¼‰
```

**ç›¸å…³æ–‡ä»¶ï¼š**
- `src/core/Board.cpp` - `calc_legal_impl()` (lines 88-170)

**å‚è€ƒæ¥æºï¼š**
- Rust Reversi: `src/rules.rs` - æ¸…æ™°çš„æ‰«æé€»è¾‘
- è‡ªä¸»åˆ†æé»‘ç™½æ£‹è§„åˆ™

**ç»éªŒæ•™è®­ï¼š**
- å®ç°æ¸¸æˆè§„åˆ™æ—¶è¦ä¸¥æ ¼æŒ‰ç…§å®šä¹‰
- å¤¹å‡» = ä¸¤ç«¯æ˜¯å·±æ–¹ + ä¸­é—´å…¨æ˜¯å¯¹æ‰‹
- è¾¹ç•Œcaseè¦å•ç‹¬è€ƒè™‘

---

### ğŸŸ¡ é—®é¢˜W1.3: Player/Opponentè§†è§’æ··æ·†

**ä¸¥é‡ç¨‹åº¦ï¼š** ä¸­  
**å‘ç”Ÿæ—¶é—´ï¼š** Week 1, Day 3  
**é—®é¢˜æè¿°ï¼š**
- `make_move()`æ‰§è¡Œåï¼Œä¸‹ä¸€ä¸ªç©å®¶çš„åˆæ³•ç§»åŠ¨è®¡ç®—é”™è¯¯
- æµ‹è¯•æ˜¾ç¤ºå¯¹æ‰‹æœ‰4ä¸ªåˆæ³•ç§»åŠ¨ï¼Œä½†å®é™…åº”è¯¥æ˜¯3ä¸ª

**æ ¹æœ¬åŸå› ï¼š**
```cpp
void Board::make_move(int pos) {
    uint64_t move_bb = 1ULL << pos;
    uint64_t flipped = calc_flip(move_bb);
    
    player |= move_bb | flipped;   // æ”¾ç½®æ£‹å­+ç¿»è½¬
    opponent &= ~flipped;          // ç§»é™¤è¢«ç¿»è½¬çš„å¯¹æ‰‹æ£‹å­
    
    // âŒ å¿˜è®°äº¤æ¢è§†è§’ï¼
    // ä¸‹ä¸€ä¸ªè°ƒç”¨legal_moves()æ—¶ï¼Œä»ç„¶æ˜¯åŸplayerçš„è§†è§’
}
```

**é—®é¢˜è¡¨ç°ï¼š**
```
åˆå§‹: player=White, opponent=Black
æ‰§è¡Œ: Whiteåœ¨d6è½å­
é¢„æœŸ: è½®åˆ°Blackï¼Œåº”è¯¥ä»Blackè§†è§’çœ‹
å®é™…: ä»ä»Whiteè§†è§’çœ‹ï¼Œç”Ÿæˆé”™è¯¯çš„åˆæ³•ç§»åŠ¨
```

**æ­£ç¡®è§£å†³æ–¹æ¡ˆï¼š**
```cpp
void Board::make_move(int pos) {
    uint64_t move_bb = 1ULL << pos;
    uint64_t flipped = calc_flip(move_bb);
    
    player |= move_bb | flipped;
    opponent &= ~flipped;
    
    // âœ… äº¤æ¢playerå’Œopponent
    std::swap(player, opponent);
    
    // ç°åœ¨opponentæ˜¯åˆšåˆšç§»åŠ¨çš„ç©å®¶
    // playeræ˜¯ä¸‹ä¸€ä¸ªè¦ç§»åŠ¨çš„ç©å®¶
}
```

**è®¾è®¡ç†å¿µï¼š**
- **Boardç±»å§‹ç»ˆä»å½“å‰ç©å®¶(player)çš„è§†è§’**
- `player` bitboard = ä¸‹ä¸€ä¸ªè¦ç§»åŠ¨çš„ç©å®¶
- `opponent` bitboard = ä¸Šä¸€ä¸ªåˆšç§»åŠ¨çš„ç©å®¶
- æ¯æ¬¡`make_move()`åè‡ªåŠ¨åˆ‡æ¢è§†è§’

**éªŒè¯æµ‹è¯•ï¼š**
```cpp
Board board;
auto moves1 = board.legal_moves();  // Whiteçš„4ä¸ªåˆæ³•ç§»åŠ¨

board.make_move(19);  // Whiteåœ¨d6è½å­
auto moves2 = board.legal_moves();  // ç°åœ¨åº”è¯¥æ˜¯Blackçš„åˆæ³•ç§»åŠ¨

assert(moves1.size() == 4);
assert(moves2.size() == 3);  // ä¸æ˜¯4ï¼
```

**ç›¸å…³æ–‡ä»¶ï¼š**
- `src/core/Board.cpp` - `make_move()` (lines 326-350)
- `src/core/Board.hpp` - è®¾è®¡è¯´æ˜

**æ›¿ä»£è®¾è®¡ï¼ˆæœªé‡‡ç”¨ï¼‰ï¼š**
```cpp
// æ–¹æ¡ˆB: æ˜¾å¼ä¼ å…¥é¢œè‰²
void make_move(int pos, Color color);

// æ–¹æ¡ˆC: åˆ†ç¦»çš„è§†è§’ç®¡ç†
class Board {
    uint64_t black, white;
    Color current_player;
};
```

**é€‰æ‹©å½“å‰è®¾è®¡çš„åŸå› ï¼š**
- Bitboardç®—æ³•åªéœ€è¦"å·±æ–¹"å’Œ"å¯¹æ‰‹"æ¦‚å¿µ
- é¿å…if-elseåˆ¤æ–­å½“å‰é¢œè‰²
- ç®—æ³•æ›´ç®€æ´ï¼Œæ€§èƒ½æ›´å¥½

**ç»éªŒæ•™è®­ï¼š**
- è®¾è®¡æ•°æ®ç»“æ„æ—¶è¦æ˜ç¡®"è§†è§’"æ¦‚å¿µ
- çŠ¶æ€å˜åŒ–åè¦ç»´æŠ¤ä¸å˜é‡
- æµ‹è¯•è¦éªŒè¯è¿ç»­å¤šæ­¥çš„æ­£ç¡®æ€§

---

## ğŸ¯ æ€»ç»“ä¸å»ºè®®

### æ ¸å¿ƒåŸåˆ™

1. **é—®é¢˜ä¼˜å…ˆçº§ï¼š**
   - ğŸ”´ é«˜ï¼šé˜»æ­¢ç¼–è¯‘/è¿è¡Œ
   - ğŸŸ¡ ä¸­ï¼šå½±å“åŠŸèƒ½/æ€§èƒ½
   - ğŸŸ¢ ä½ï¼šä»£ç è´¨é‡/é£æ ¼

2. **è§£å†³ç­–ç•¥ï¼š**
   - å…ˆç†è§£æ ¹æœ¬åŸå› 
   - é€‰æ‹©æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆ
   - è®°å½•è¿‡ç¨‹ä¾›æœªæ¥å‚è€ƒ

3. **é¢„é˜²æ€ç»´ï¼š**
   - å‚è€ƒä»–äººé¡¹ç›®æ—¶è°¨æ…
   - æ¸è¿›å¼å¼•å…¥æ–°æŠ€æœ¯
   - ä¿æŒä»£ç ç®€å•æ¸…æ™°

### å­¦ä¹ èµ„æº

**é‡åˆ°é—®é¢˜æ—¶æŸ¥é˜…ï¼š**
1. æœ¬æ–‡æ¡£ï¼ˆå·²çŸ¥é—®é¢˜ï¼‰
2. å‚è€ƒé¡¹ç›®README
3. C++ Reference (cppreference.com)
4. Stack Overflow
5. é¡¹ç›®Issueï¼ˆå¦‚æœå¼€æºï¼‰

### ç»´æŠ¤æ­¤æ–‡æ¡£

**æ›´æ–°è§„åˆ™ï¼š**
- âœ… é‡åˆ°æ–°é—®é¢˜ç«‹å³è®°å½•
- âœ… è§£å†³åè¡¥å……è§£å†³æ–¹æ¡ˆ
- âœ… æ¯å‘¨å®¡æŸ¥ä¸€æ¬¡
- âœ… é¡¹ç›®ç»“æŸæ—¶æ•´ç†æ€»ç»“

---

**æœ€åæ›´æ–°ï¼š** 2025å¹´10æœˆ12æ—¥  
**ä¸‹æ¬¡å®¡æŸ¥ï¼š** Week 2ç»“æŸæ—¶  
**é—®é¢˜æ€»æ•°ï¼š** å·²è®°å½•25ä¸ªé—®é¢˜ï¼ˆåŒ…å«Week 1å®é™…é‡åˆ°çš„3ä¸ªé—®é¢˜ï¼‰  
**Week 1çŠ¶æ€ï¼š** âœ… æ‰€æœ‰é—®é¢˜å·²è§£å†³

---

*"è®°å½•é—®é¢˜ï¼Œç§¯ç´¯ç»éªŒï¼ŒæŒç»­æ”¹è¿›ï¼"*

